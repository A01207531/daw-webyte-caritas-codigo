<h1>Modificar beneficiario</h1>

<form method="POST">
  <div class="row">
    <div class="input-field col m6 s12">
      <input value='{{nombre}}' id="name" type="text" class="validate" name="name">
      <label for="name">Nombre</label>
    </div>

    <div value='{{apellido}}' class="input-field col m6 s12">
      <input value='{{apellido}}'id="last_name" type="text" class="validate"
        name="lastname">
      <label for="last_name">Apellido</label>
    </div>

    <div class="input-field col m6 s12">
      <label>
        <input checked=false type="checkbox" name="checkIndigena" id="checkIndigena" />
        <span>¿Es indigente?</span>
      </label>
    </div>
    <div class="input-field col m6 s12">
      <label>
        <input type="checkbox" name="checkExtrangero" id="checkExtrangero" />
        <span>¿Es extranjero?</span>
      </label>
    </div>

    <div class="input-field col m6 s12 margin-top">
      <select value='{{municipioid}}' name="state" id="state" class="browser-default">
        <option value="" disabled selected>Seleccione...</option>
        <option value='AGUASCALIENTES'>AGUASCALIENTES</option>
        <option value='BAJA CALIFORNIA'>BAJA CALIFORNIA</option>
        <option value='BAJA CALIFORNIA SUR'>BAJA CALIFORNIA SUR</option>
        <option value='CAMPECHE'>CAMPECHE</option>
        <option value='CHIAPAS'>CHIAPAS</option>
        <option value='CHIHUAHA'>CHIHUAHA</option>
        <option value='CDMX'>CDMX</option>
        <option value='COAHUILA'>COAHUILA</option>
        <option value='COLIMA'>COLIMA</option>
        <option value='DURANGO'>DURANGO</option>
        <option value='GUANAJUATO'>GUANAJUATO</option>
        <option value='GUERRERO'>GUERRERO</option>
        <option value='HIDALGO'>HIDALGO</option>
        <option value='JALISCO'>JALISCO</option>
        <option value='EDOMEX'>EDOMEX</option>
        <option value='MICHOACAN'>MICHOACAN</option>
        <option value='MORELOS'>MORELOS</option>
        <option value='NAYARIT'>NAYARIT</option>
        <option value='NUEVO LEON'>NUEVO LEON</option>
        <option value='OAXACA'>OAXACA</option>
        <option value='PUEBLA'>PUEBLA</option>
        <option value='QUERETARO'>QUERETARO</option>
        <option value='QUINTANA ROO'>QUINTANA ROO</option>
        <option value='SAN LUIS POTOSI'>SAN LUIS POTOSI</option>
        <option value='SINALOA'>SINALOA</option>
        <option value='SONORA'>SONORA</option>
        <option value='TABASCO'>TABASCO</option>
        <option value='TAMAULIPAS'>TAMAULIPAS</option>
        <option value='TLAXCALA'>TLAXCALA</option>
        <option value='VERACRUZ'>VERACRUZ</option>
        <option value='YUCATAN'>YUCATAN</option>
        <option value='ZACATECAS'>ZACATECAS</option>

      </select>
      <label class="active">Estado</label>
    </div>
    <div class="input-field col m6 s12 margin-top" >
      <select name="city" id="city" class="browser-default">
      </select>
      <label class="active">Municipio</label>
    </div>
  
    <div class="input-field col m6 s12">
      Fecha de nacimiento
      <input value='' type="date" name="nacimiento" id="nacimiento">
    </div>
    <div class="input-field col m6 s12">
      <input value='{{direccion}}' id="address" name="address"type="text" class="validate">
      <label for="address">Dirección</label>
    </div>

    <div class="input-field col m6 s12">
      <input value='{{curp}}' id="curp" name="curp"type="text" class="validate">
      <label for="curp">CURP</label>
    </div>
    <div class="input-field col m6 s12">
      <input value='{{rfc}}' id="rfc" type="text" class="validate" name="rfc">
      <label for="rfc">RFC</label>
    </div>
    <div class="input-field col m6 s12">
      <input value='{{profesion}}' id="profesion" type="text" class="validate"
        name="profesion">
      <label for="ine">Profesion</label>
    </div>

    <div class="input-field col m6 s12">
      <select value='' id="status" name="status" class="browser-default">
        <option value="" disabled selected>Seleccione...</option>
        <option value="M">Masculino</option>
        <option value="F">Femenino</option>
      </select>
      <label for="first_name" class="active">Género</label>
    </div>
    <div class="input-field col m6 s12">
      <select value='{{estadocivil}}' id="estadoCivil" name="estadoCivil" class="browser-default">
        <option value="" disabled selected>Seleccione...</option>
        <option value="CASADO">Casado</option>
        <option value="DIVORCIADO">Divorciado</option>
        <option value="UNIONLIBRE">Union Libre</option>
        <option value="SOLTERO">Soltero</option>          
      </select>
      <label for="estadoCivil" class="active">Estado Civil</label>
    </div>
    <div class="input-field col m6 s12">
      <select id="canalizacion" name="canalizacion" class="browser-default">
        <option  disabled selected>Seleccione...</option>         
      </select>
      <label for="canalizacion" class="active">Canalización</label>
    </div>
     
  </div>

  
  <button class="btn waves-effect waves-light red darken-2" type="submit" name="action">Registrar</button>

</form>


  <!--Testing JS for the cities-->
  <script src="/javascripts/mx-data.js"></script>
  <script src="/javascripts/new-proj-form.js"></script>
  <script>
<<<<<<< HEAD
    let benef;

    function geoPopulate(){
      const stateShort = benef.municipio.estado;
      const state = map[stateShort];

      //change value
      $("#state").val(state);
      //populate cities
      //get the cities
      const cities = mx[$('#state').val()];
      //we have the cities
      //clear the select
      $('#city').empty();
      //populate the cities
      for(const c in cities){
          const city = cities[c];
          $('#city').append('<option value="'+city.id+'">'+city.nombre+'</option>');
      }

      //set the correct value

      $("#city").val(benef.municipio.id);


    }


=======
     
>>>>>>> c126f812fd7213475736a46726ed3f07626c4a87
    document.getElementById("status").value = "{{sexo}}";
    document.getElementById("estadoCivil").value = "{{estadocivil}}";
    document.getElementById("nacimiento").value = "{{dateFormat nacimiento "YYYY-MM-DD"}}";
    document.getElementById("checkExtrangero").checked = {{extranjero}};
    document.getElementById("checkIndigena").checked = {{indigente}};

      

    document.addEventListener('DOMContentLoaded', () => {
      const checkIndigena = $("#checkIndigena");
      checkIndigena.on("click", () => {
        if(checkIndigena.is(':checked')) {
          $('#state').prop('disabled', true);
          $('#city').prop('disabled', true);
        } else {
          $('#state').prop('disabled', false);
          $('#city').prop('disabled', false); 
        }
      });
    $.getJSON('/dashboard/beneficiarios/json/'+location.pathname.split("/").pop(),data =>{
      console.log(data);
      benef = data;
      geoPopulate();

    })

    });
  </script>